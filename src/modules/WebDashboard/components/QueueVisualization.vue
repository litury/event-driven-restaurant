<!--
  –ö–æ–º–ø–æ–Ω–µ–Ω—Ç –≤–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏–∏ –æ—á–µ—Ä–µ–¥–∏ —Å–æ–±—ã—Ç–∏–π
  
  –û—á–µ—Ä–µ–¥—å - —ç—Ç–æ —Ñ–∏–∫—Å–∏—Ä—É—é—â–µ–µ –æ–±–æ—Ä—É–¥–æ–≤–∞–Ω–∏–µ –¥–ª—è —Å–æ–±—ã—Ç–∏–π
  –û—Ç–æ–±—Ä–∞–∂–∞–µ—Ç —Å–æ—Å—Ç–æ—è–Ω–∏–µ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–π –æ—á–µ—Ä–µ–¥–∏ –≤ —Å–æ–±—ã—Ç–∏–π–Ω–æ–π —Å–∏—Å—Ç–µ–º–µ –±–∞–ª–∞–Ω—Å–∏—Ä–æ–≤–∫–∏
  
      –ü—Ä–∏–Ω—Ü–∏–ø—ã CEP:
  - –°–æ–±—ã—Ç–∏—è —Å—Ç—Ä–æ–≥–æ —É–ø–æ—Ä—è–¥–æ—á–µ–Ω—ã –ø–æ –≤—Ä–µ–º–µ–Ω–∏
  - –û—á–µ—Ä–µ–¥—å —Ö—Ä–∞–Ω–∏—Ç –∏ —Ñ–∏–∫—Å–∏—Ä—É–µ—Ç —Å–æ–±—ã—Ç–∏—è –≤ –ø–æ—Ä—è–¥–∫–µ –ø–æ—Å—Ç—É–ø–ª–µ–Ω–∏—è  
  - –ö–∞–∂–¥–∞—è –æ—á–µ—Ä–µ–¥—å –∏–º–µ–µ—Ç –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–Ω—É—é —Ä–æ–ª—å –≤ —Å–∏—Å—Ç–µ–º–µ (—Ä–∞–±–æ—Ç—ã, –Ω–∞–∑–Ω–∞—á–µ–Ω–∏—è, —Ä–∞–±–æ—á–∏–µ)
-->
<template>
  <div
    :class="[
      'bg-white/10 backdrop-blur-sm rounded-xl p-6 transition-all hover:bg-white/15',
      borderColorClass,
    ]"
  >
    <!-- –ó–∞–≥–æ–ª–æ–≤–æ–∫ –æ—á–µ—Ä–µ–¥–∏ —Å —Ä–∞–∑–º–µ—Ä–æ–º -->
    <div class="flex items-center justify-between mb-4">
      <h3 class="text-lg font-semibold text-white">{{ title }}</h3>
      <div :class="['text-3xl font-bold', sizeColorClass]">
        {{ size }}
      </div>
    </div>

    <!-- –í–∏–∑—É–∞–ª—å–Ω—ã–π –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä –∑–∞–≥—Ä—É–∑–∫–∏ –æ—á–µ—Ä–µ–¥–∏ -->
    <div class="w-full bg-gray-700 rounded-full h-2 mb-3">
      <div
        :class="[
          'h-2 rounded-full transition-all duration-500',
          progressColorClass,
        ]"
        :style="{ width: `${progressPercent}%` }"
      ></div>
    </div>

    <!-- –û–ø–∏—Å–∞–Ω–∏–µ —Ä–æ–ª–∏ –æ—á–µ—Ä–µ–¥–∏ –≤ —Å–∏—Å—Ç–µ–º–µ -->
    <p class="text-sm text-slate-300">{{ description }}</p>

    <!-- –°—Ç–∞—Ç—É—Å –æ—á–µ—Ä–µ–¥–∏ (–∞–∫—Ç–∏–≤–Ω–∞/–ø—É—Å—Ç–∞) -->
    <div class="flex items-center mt-2 space-x-2">
      <div
        :class="[
          'w-2 h-2 rounded-full',
          size > 0 ? 'bg-green-400 animate-pulse' : 'bg-gray-500',
        ]"
      ></div>
      <span class="text-xs text-slate-400">
        {{ size > 0 ? "–ê–∫—Ç–∏–≤–Ω–∞" : "–ü—É—Å—Ç–∞" }}
      </span>
    </div>
  </div>
</template>

<script setup lang="ts">
import { computed } from "vue";

/**
 * –°–≤–æ–π—Å—Ç–≤–∞ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞ –æ—á–µ—Ä–µ–¥–∏ —Å–æ–±—ã—Ç–∏–π
 */
interface Props {
  /** –ù–∞–∑–≤–∞–Ω–∏–µ –æ—á–µ—Ä–µ–¥–∏ (–Ω–∞–ø—Ä–∏–º–µ—Ä, "üìù –û—á–µ—Ä–µ–¥—å –†–∞–±–æ—Ç") */
  title: string;

  /** –¢–µ–∫—É—â–∏–π —Ä–∞–∑–º–µ—Ä –æ—á–µ—Ä–µ–¥–∏ (–∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —Å–æ–±—ã—Ç–∏–π) */
  size: number;

  /** –¶–≤–µ—Ç–æ–≤–∞—è —Å—Ö–µ–º–∞ –¥–ª—è –≤–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏–∏ */
  color: "blue" | "green" | "purple" | "orange" | "red" | "emerald";

  /** –û–ø–∏—Å–∞–Ω–∏–µ —Ä–æ–ª–∏ –æ—á–µ—Ä–µ–¥–∏ –≤ —Å–∏—Å—Ç–µ–º–µ */
  description: string;

  /** –ú–∞–∫—Å–∏–º–∞–ª—å–Ω—ã–π —Ä–∞–∑–º–µ—Ä –¥–ª—è —Ä–∞—Å—á–µ—Ç–∞ –ø—Ä–æ—Ü–µ–Ω—Ç–∞ –∑–∞–ø–æ–ª–Ω–µ–Ω–∏—è */
  maxSize?: number;
}

const props = withDefaults(defineProps<Props>(), {
  maxSize: 10,
});

/**
 * –ü—Ä–æ—Ü–µ–Ω—Ç –∑–∞–ø–æ–ª–Ω–µ–Ω–∏—è –æ—á–µ—Ä–µ–¥–∏ –¥–ª—è –≤–∏–∑—É–∞–ª—å–Ω–æ–≥–æ –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä–∞
 *
 * –û–≥—Ä–∞–Ω–∏—á–∏–≤–∞–µ–º –º–∞–∫—Å–∏–º—É–º 100% –¥–ª—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ–≥–æ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è
 */
const progressPercent = computed((): number =>
  Math.min((props.size / props.maxSize) * 100, 100)
);

/**
 * CSS –∫–ª–∞—Å—Å—ã –¥–ª—è —Ü–≤–µ—Ç–æ–≤–æ–≥–æ –∫–æ–¥–∏—Ä–æ–≤–∞–Ω–∏—è –æ—á–µ—Ä–µ–¥–µ–π
 *
 * –ö–∞–∂–¥—ã–π —Ç–∏–ø –æ—á–µ—Ä–µ–¥–∏ –∏–º–µ–µ—Ç —Å–≤–æ–π —Ü–≤–µ—Ç –¥–ª—è –ª—É—á—à–µ–≥–æ –ø–æ–Ω–∏–º–∞–Ω–∏—è —Å–∏—Å—Ç–µ–º—ã:
 * - –°–∏–Ω–∏–π: –≤—Ö–æ–¥—è—â–∏–µ –¥–∞–Ω–Ω—ã–µ (—Ä–∞–±–æ—Ç—ã)
 * - –ó–µ–ª–µ–Ω—ã–π: –¥–æ—Å—Ç—É–ø–Ω—ã–µ —Ä–µ—Å—É—Ä—Å—ã (—Å–≤–æ–±–æ–¥–Ω—ã–µ —Ä–∞–±–æ—á–∏–µ)
 * - –§–∏–æ–ª–µ—Ç–æ–≤—ã–π: –ø—Ä–æ–º–µ–∂—É—Ç–æ—á–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ (–Ω–∞–∑–Ω–∞—á–µ–Ω–∏—è)
 * - –û—Ä–∞–Ω–∂–µ–≤—ã–π/–ö—Ä–∞—Å–Ω—ã–π: –æ–±—Ä–∞–±–æ—Ç–∫–∞ (—Ä–∞–±–æ—á–∏–µ)
 * - –ò–∑—É–º—Ä—É–¥–Ω—ã–π: —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã
 */
const colorClasses = {
  blue: "border-l-4 border-blue-400",
  green: "border-l-4 border-green-400",
  purple: "border-l-4 border-purple-400",
  orange: "border-l-4 border-orange-400",
  red: "border-l-4 border-red-400",
  emerald: "border-l-4 border-emerald-400",
};

const sizeColorClasses = {
  blue: "text-blue-400",
  green: "text-green-400",
  purple: "text-purple-400",
  orange: "text-orange-400",
  red: "text-red-400",
  emerald: "text-emerald-400",
};

const progressColorClasses = {
  blue: "bg-blue-400",
  green: "bg-green-400",
  purple: "bg-purple-400",
  orange: "bg-orange-400",
  red: "bg-red-400",
  emerald: "bg-emerald-400",
};

const borderColorClass = computed((): string => colorClasses[props.color]);
const sizeColorClass = computed((): string => sizeColorClasses[props.color]);
const progressColorClass = computed(
  (): string => progressColorClasses[props.color]
);
</script>
