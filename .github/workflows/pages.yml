name: Deploy Static Site

on:
  push:
    branches: [main]
  workflow_dispatch:

permissions:
  contents: read
  pages: write
  id-token: write

concurrency:
  group: "pages"
  cancel-in-progress: false

jobs:
  deploy:
    environment:
      name: github-pages
      url: ${{ steps.deployment.outputs.page_url }}
    runs-on: ubuntu-latest
    steps:
      - name: Checkout
        uses: actions/checkout@v4

      - name: Create simple index.html
        run: |
          mkdir -p dist
          cat > dist/index.html << 'EOF'
          <!DOCTYPE html>
          <html lang="ru">
          <head>
              <meta charset="UTF-8">
              <meta name="viewport" content="width=device-width, initial-scale=1.0">
              <title>CEP Restaurant Demo - Coming Soon</title>
              <style>
                  body { 
                      font-family: system-ui, -apple-system, sans-serif; 
                      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
                      color: white; 
                      margin: 0; 
                      padding: 2rem;
                      min-height: 100vh;
                      display: flex;
                      align-items: center;
                      justify-content: center;
                      text-align: center;
                  }
                  .container { max-width: 600px; }
                  h1 { font-size: 3rem; margin-bottom: 1rem; }
                  p { font-size: 1.2rem; opacity: 0.9; line-height: 1.6; }
                  .status { 
                      background: rgba(255,255,255,0.1); 
                      padding: 1rem; 
                      border-radius: 8px; 
                      margin-top: 2rem;
                  }
                  .emoji { font-size: 4rem; margin-bottom: 1rem; }
              </style>
          </head>
          <body>
              <div class="container">
                  <div class="emoji">üçΩÔ∏è</div>
                  <h1>CEP Restaurant Demo</h1>
                  <p>–î–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏—è —Å–æ–±—ã—Ç–∏–π–Ω–æ–π —Å–∏—Å—Ç–µ–º—ã —Ä–µ—Å—Ç–æ—Ä–∞–Ω–∞ –Ω–∞ Vue 3 + TypeScript</p>
                  <div class="status">
                      <p><strong>‚úÖ –ü—Ä–æ–µ–∫—Ç —Ä–∞–±–æ—Ç–∞–µ—Ç –ª–æ–∫–∞–ª—å–Ω–æ</strong></p>
                      <p>‚ö†Ô∏è –í—Ä–µ–º–µ–Ω–Ω–∞—è –ø—Ä–æ–±–ª–µ–º–∞ —Å Tailwind CSS 4 –≤ CI/CD</p>
                      <p>üîß –†–∞–±–æ—Ç–∞–µ–º –Ω–∞–¥ —Ä–µ—à–µ–Ω–∏–µ–º...</p>
                  </div>
                  <p style="margin-top: 2rem;">
                      <a href="https://github.com/litury/event-driven-restaurant" 
                         style="color: white; text-decoration: underline;">
                          üìÅ –ò—Å—Ö–æ–¥–Ω—ã–π –∫–æ–¥ –Ω–∞ GitHub
                      </a>
                  </p>
              </div>
          </body>
          </html>
          EOF

      - name: Setup Pages
        uses: actions/configure-pages@v4

      - name: Upload artifact
        uses: actions/upload-pages-artifact@v3
        with:
          path: "./dist"

      - name: Deploy to GitHub Pages
        id: deployment
        uses: actions/deploy-pages@v4
